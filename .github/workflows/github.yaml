name: Build Docker Image
on:
  # Triggers the workflow on push request events but only for the devops branch
  push:
    branches:
      - devops
jobs:
 # This workflow contains multiple jobs
 build:
 # The type of runner that the job will run on
  runs-on: ubuntu-latest
  
  steps:
  # Checks-out your repository under $GITHUB_WORKSPACE, so your job can access it
   - name: Checkout Repository
     uses: actions/checkout@v3
       
   - name: Setup .Net core
     uses: actions/setup-dotnet@v3
     with:
       dotnet-version: '6.0'
       
  # build the apps   
   - name: Build
     run: |
       dotnet build --configuration Release 
  
       
   - name: Build the Docker image
     run: |
        docker build . --tag ghcr.io/nikitaw/reactapp-ghcr:latest
        docker push ghcr.io/nikitaw/reactapp-ghcr:latest
